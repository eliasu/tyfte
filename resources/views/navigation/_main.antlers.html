{{#
    @name Main navigation
    @desc The sites main navigation rendered on each page. There's a desktop and a mobile version.
#}}



{{# Logo #}}
<a href="/" class="absolute h-6 pointer-events-auto z-100 w-fit top-frame left-frame lg:h-8 cursor-none group" id="homeLink" aria-label="Back to home" title="Back to home">
    {{ svg:tyfte_logo class="w-full h-full" aria-hidden="true" }}
    {{ svg:tyfte_logo_main id="logoBigger" class="absolute -left-5 -top-[27px] lg:-top-[23px] pointer-events-none" aria-hidden="true" }}
</a>
<div class="fixed inset-0 pointer-events-none mix-blend-color-burn z-900">
    <div id="mouseFollower" class="absolute overflow-hidden -translate-x-1/2 -translate-y-1/2 rounded-full opacity-50 w-96 h-96 bg-purple-dark"></div>
</div>

{{# Thank you message right top #}}
<div class="absolute right-0 origin-top-right -rotate-90 -translate-x-6 translate-y-4 z-100 top-frame-2 lg:top-0 text-tag text-light">Thank you for 
    <span class="relative inline-block font-bold text-transparent transition-all bg-clip-text bg-light" id="loveCount">{{ love_counter:count }}</span> loves
</div>

<nav x-data="{ slideOverOpen: true, formStep: 1 }" class="relative z-50 w-auto h-auto">

    {{# burger button #}}
    <button id="burger" class="absolute z-100 pointer-events-auto top-frame right-frame min-h-[1.5rem] flex flex-col justify-between cursor-pointer group"
            @click="slideOverOpen = !slideOverOpen"
            :aria-label="slideOverOpen ? '{{ trans:strings.nav_close }}' : '{{ trans:strings.nav_open }}'"
            :aria-expanded="slideOverOpen">
        
        {{# burger icon #}}
        <div x-show="!slideOverOpen" x-transition:enter.duration.500ms class="h-1.5 lg:h-2 w-24 lg:w-30 bg-dark group-hover:bg-yellow transition duration-500 group-hover:scale-x-50 group-hover:-translate-x-1/4" id="bar1"></div>    
        <div x-show="!slideOverOpen" x-transition:enter.duration.500ms class="w-12 lg:w-15 h-1.5 lg:h-2 bg-dark group-hover:bg-yellow transition duration-500 group-hover:translate-x-full" id="bar2"></div>
    </button>
    
    {{# Navigation Slide in #}}
    <template x-teleport="body">
        <div 
            x-show="slideOverOpen"
            @keydown.window.escape="slideOverOpen=false"
            class="relative z-100">
            <div x-show="slideOverOpen" x-transition.opacity.duration.600ms @click="slideOverOpen = false" class="fixed inset-0 bg-dark bg-opacity-70"></div>
            <div class="fixed inset-0 overflow-hidden">
                <div class="absolute inset-0 overflow-hidden">
                    <div class="fixed inset-y-0 right-0 flex max-w-full">
                        <div 
                            x-show="slideOverOpen" 
                            @click.away="slideOverOpen = false"
                            x-transition:enter="transform transition ease-in-out duration-500 sm:duration-700" 
                            x-transition:enter-start="translate-x-full" 
                            x-transition:enter-end="translate-x-0" 
                            x-transition:leave="transform transition ease-in-out duration-500 sm:duration-700" 
                            x-transition:leave-start="translate-x-0" 
                            x-transition:leave-end="translate-x-full" 
                            class="w-screen max-w-full md:max-w-screen-3/4 lg:max-w-screen-2/3 xl:max-w-screen-1/2">
                            
                            {{# wrapper navigation elements  #}}
                            <div class="flex flex-col justify-between w-full h-full overflow-hidden shadow-lg p-frame-1/2 bg-red">
                                
                                {{# headline and close button #}}
                                <div class="flex items-center justify-end w-full xs:justify-between">
                                    {{# headline #}}
                                    <p  class="hidden mb-0 xs:block text-lead-2 text-dark" 
                                        x-show="slideOverOpen" x-transition:enter.delay.500ms
                                        id="slide-over-title">
                                        the yellow from the egg
                                    </p>
                                    
                                    {{ partial:components/button class="text-dark hover:text-red" label="close" icon="close" }}
                                        x-show="slideOverOpen" x-transition:enter.delay.600ms
                                        @click="slideOverOpen = false"
                                    {{ /partial:components/button }}
                                </div>
                                    
                                <form 
                                    id="contact-from" class="flex flex-col items-start justify-between h-full"
                                    aria-label="contact form" 
                                    @submit.prevent="console.log('Submitted Form!!!')">

                                    {{# form inner wrapper #}}
                                    <div class="relative w-full h-full">
                                    
                                        {{# loop through all form slides #}}
                                        {{ contact_form:form_slides }}
                                            {{# single form slide  #}}
                                            <div x-transition.duration.500ms class="absolute inset-0 flex flex-col justify-center w-full h-full gap-10" x-cloak x-show="formStep === {{ index + 1 }}">
                                                
                                                {{# optional slide headline #}}
                                                <h2 class="text-dark text-lead-2">{{ headline }}</h2>
                                                
                                                {{# optional slide description #}}
                                                <p class="text-dark text-lead-1">{{ description }}</p>

                                                {{# loop through all form elements #}}
                                                {{ form_elements }}
                                                    {{ partial:form/{type} }}
                                                {{ /form_elements }}
                                            </div>
                                        {{ /contact_form:form_slides }}
                                    </div>
                                    
                                    {{# form buttons #}}
                                    <div class="flex flex-col items-center gap-4 bottom-frame">
                                            
                                        {{# submit #}}
                                        {{ partial:components/button class="text-dark hover:text-purple mb-frame-1/2" label="Let's go" big="true" icon="arrup"}}
                                            x-show="formStep === {{ contact_form:form_slides | count }}"
                                            type="submit"
                                            x-transition:enter.delay.500ms
                                        {{ /partial:components/button }}

                                        <div class="flex gap-4">
                                            {{# back #}}
                                            {{ partial:components/button class="text-dark hover:text-red" type="backbutton" label="back" }}
                                                :class="formStep != 1 ? '' : 'opacity-30 pointer-events-none' "
                                                @click.prevent="formStep--"
                                            {{ /partial:components/button }}

                                            {{# next #}}
                                            {{ partial:components/button class="text-dark hover:text-green" label="next" }}
                                                :class="formStep != {{ contact_form:form_slides | count }} ? '' : 'opacity-30 pointer-events-none' "
                                                @click.prevent="formStep++"
                                            {{ /partial:components/button }}
                                        </div>
                                    </div>
                                </form>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
</nav>
